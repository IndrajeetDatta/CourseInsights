CREATE DATABASE courseInsights;

USE courseInsights;

CREATE TABLE user(user_id INT NOT NULL AUTO_INCREMENT, f_name VARCHAR(255) NOT NULL, l_name VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, hash VARCHAR(255) NOT NULL, institution VARCHAR(255), title VARCHAR(255), isAdmin BOOL NOT NULL DEFAULT 0, bio TEXT, PRIMARY KEY (user_id));

CREATE TABLE courses(course_id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, course_name VARCHAR(255) NOT NULL, course_number VARCHAR(255) NOT NULL, user_id INT NOT NULL, isUpdated bool DEFAULT 0, FOREIGN KEY fk_user(user_id) REFERENCES user(user_id) ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE chapters(chapter_id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, chapter_name VARCHAR(255) NOT NULL, indx INT NOT NULL, course_id INT NOT NULL, FOREIGN KEY fk_course(course_id) REFERENCES courses(course_id) ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE videos(video_id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, video_name VARCHAR(255) NOT NULL, video_length INT NOT NULL, indx INT NOT NULL, course_id INT NOT NULL, FOREIGN KEY fk_course(course_id) REFERENCES courses(course_id) ON UPDATE CASCADE ON DELETE CASCADE);

CREATE TABLE problems(problem_id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, problem_name VARCHAR(255) NOT NULL, problem_type VARCHAR(255) NOT NULL, indx INT NOT NULL, course_id INT NOT NULL, FOREIGN KEY fk_course(course_id) REFERENCES courses(course_id) ON UPDATE CASCADE ON DELETE CASCADE);

CREATE TABLE discussions(discussion_id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, discussion_name VARCHAR(255) NOT NULL, indx INT NOT NULL, course_id INT NOT NULL, FOREIGN KEY fk_course(course_id) REFERENCES courses(course_id) ON UPDATE CASCADE ON DELETE CASCADE);

CREATE TABLE htmls(html_id INT NOT NULL AUTO_INCREMENT PRIMARY KEY, html_name VARCHAR(255) NOT NULL, html_length INT, html_type VARCHAR(255) NOT NULL, has_pdf BOOL NOT NULL, pdf_pages INT, indx INT NOT NULL, course_id INT NOT NULL, FOREIGN KEY fk_course(course_id) REFERENCES courses(course_id) ON UPDATE CASCADE ON DELETE CASCADE);
